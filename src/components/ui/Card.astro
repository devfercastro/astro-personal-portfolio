---
import ArrowTopRightOnSquareIcon from "@ui/icons/ArrowTopRightOnSquareIcon.astro";
import GithubIcon from "@ui/icons/GithubIcon.astro";

import Badge from "./Badge.astro";

type BadgeItem = {
	text: string;
	icon: string;
};

interface Props {
	title: string;
	subtitle?: string;
	body: string;
	img?: string;
	url?: string;
	urls?: { [key: string]: string };
	badges?: BadgeItem[];
	time?: number;
	type: "experience" | "project";
}

const { title, subtitle, body, img, url, urls, badges, time, type } =
	Astro.props;
---
<li
  class="h-min flex flex-col rounded-lg shadow-lg lg:shadow-none bg-[var(--card-bg-hover)] lg:bg-[var(--card-bg-default)] hover:shadow-lg hover:bg-[var(--card-bg-hover)] transition-all duration-100 lg:duration-300 group"
>
  {img && <img src={img} alt={title} class="w-full min-h-[280px] object-cover rounded-t-lg border border-[var(--text-primary)]" />}
  <div class="flex flex-col w-full p-4 lg:p-8">
    <header class="w-full flex flex-col mb-3">
      {type === "project" && (
        <div class="w-full flex flex-row justify-between">
          <h2 class="font-semibold text-xl">{title}</h2>
          <div class="flex flex-row gap-2">
            <a href={urls?.code} target="_blank" rel="noopener noreferrer">
              <GithubIcon height={24} width={24} title="Github repo" />
            </a>
            <a href={urls?.preview} target="_blank" rel="noopener noreferrer">
              <ArrowTopRightOnSquareIcon height={24} width={24} title="Live preview" />
            </a>
          </div>
        </div>
      )}
      {type === "experience" && (
        <div class="flex flex-row gap-2 items-center">
          <a href={url} target="_blank" rel="noopener noreferrer" class="group">
            <h2 class="font-semibold text-xl group-hover:underline group-hover:decoration-solid transition-all duration-300">
              {title}
            </h2>
          </a>
          <ArrowTopRightOnSquareIcon
            height={20}
            width={20}
            class="lg:opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          />
        </div>
        )}
      {subtitle && (
        <div class="w-full flex flex-row items-center justify-between">
          <h3 class="font-semibold text-lg">{subtitle}</h3>
          <Badge text={`${time} years`} />
        </div>
      )}
    </header>
    <div class="flex flex-col">
      <p class="mb-2 text-base text-[var(--text-secundary)]">{body}</p>

      <div class="flex flex-row w-full">
        <p class="text-sm font-medium whitespace-nowrap mt-1 mr-5 h-full text-start">Tech Stack:</p>
        <div class="flex flex-wrap gap-x-3 gap-y-2">
          {badges?.map((badge) => (
            <Badge
              text={badge.text}
              icon={badge.icon}
            />
          ))}
        </div>
      </div>
    </div>
  </div>
</li>
